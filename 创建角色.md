[TOC]

#### 创建模块控制器

角色控制器 需要指定模块

**这是一个资源路由器**

```php
artisan module:make-controller RoleController Admin  
```



#### 创建路由

这个路由需要已登录，包裹在`auth:admin` 中间件下

```php
Route::resource('role','RoleController');
```

查看路由列表是否存在role资源路由

```php
artisan route:list  
```



修改子菜单的权限管理的url为 `/admin/role`

`/admin/role` 跳转到的是RoleController 控制器下的 index方法

我们要修改默认显示页面

```php
return view('admin:role.index');  
```



#### 创建视图文件

在Admin模板下创建一个role文件夹用来存视图文件

在目录下创建一个 `index.blade.php` 来对应 `admin:role.index` 路由

这个页面的内容是显示角色列表  



##### index页面的有关修改

页面头为角色管理

两个按钮 一个显示角色列表    一个显示角色添加  





#### Modal 模态框 定义

模态框对用户友好度更高

复制模态框按钮

复制模态框显示部分，**因为复制过来时是显示的，需要把 `display:block`  属性去掉**

按钮id  和 模态框id 是一致的  



##### 模态框复用

模态框应用很广，应该复用，把它变成一个单独的代码块

在根下views 创建一个  `components` 组件文件夹  写一个modal.blade.php文件

把模态框文件复制过来  



##### 模态框使用

调用方法

```
@component('components.modal')

@endcomponent
```

这是一个小组件的调用

模态框中间内容部分 是经常变动的

需要把 modal.blade.php 下的表单或者其他主要内容 删掉

换上  `{{$slot}}`  占位符  



把删除的内容复制到这里

```php
@component('components.modal')
	//{{$solt}} 根据页面需要填充占位的内容
	...
@endcomponent  
```



##### 详细指定模态框内容

`component` 可以添加参数 参数类型是二维数组

在参数里面可以传递各种模态框的DIY操作

指定 模态框id是addRole  跳转url

```php
@component('components.modal',['id'=>'addRole','title'=>'添加角色','url'=>'','method'=>'PUT'])
```

**此时需要把按钮的id 指定为 `data-target = "#addRole"`**

**需要分配变量给 `index.blaed.php`** 

```php+HTML
<form action="{{$url}}" method="post">   动态模态框跳转地址
    @csrf
    @isset($method)
    	@method($method)
    @endisset
	<div id="{{$id}}" ></div>            动态模态框 id
    <h3 class="text-center">{{$title}}</h3>    动态模态框标题
    {{$slot}}
</form>    
```

按钮是 `submit` 时 需要把模态框默认属性去掉 `data-dismiss="modal"` 否则无法提交

`@isset()` 表示是否存在这个变量  存在就进入  











